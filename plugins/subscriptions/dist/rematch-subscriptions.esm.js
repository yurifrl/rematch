var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,n){return e(n={exports:{}},n.exports),n.exports}var subscriptions=createCommonjsModule(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.subscriptions=new Map,n.patternSubscriptions=new Map});unwrapExports(subscriptions);var subscriptions_1=subscriptions.subscriptions,subscriptions_2=subscriptions.patternSubscriptions,handlers=createCommonjsModule(function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var t=/^[A-Z0-9-_]+\/[A-Z0-9-_]+$/i,r=/^[A-Z0-9-_*]+\/[A-Z0-9-_*]+$/i,o=function(e,n){return!!e.match(n)};n.onHandlers=function(e){return function(n){if(o(n,t))e(subscriptions.subscriptions,n);else if(o(n,r)){var s="^"+n.replace("*",".*")+"$";e(subscriptions.patternSubscriptions,s)}else{if("^"!==n[0])throw Error("Invalid subscription matcher: "+n);e(subscriptions.patternSubscriptions,n)}}}});unwrapExports(handlers);var handlers_1=handlers.onHandlers,create=createCommonjsModule(function(e,n){var t=commonjsGlobal&&commonjsGlobal.__assign||Object.assign||function(e){for(var n,t=1,r=arguments.length;r>t;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e};Object.defineProperty(n,"__esModule",{value:!0}),n.createSubscription=function(e,n,r,o){handlers.onHandlers(function(n,s){o.forEach(function(n){var t=RegExp(s);if((e+"/"+n).match(t))throw Error("Subscription ("+s+") cannot match action name ("+n+") in its own model.")});var i,u=((i={})[e]=r,i);n.has(s)&&(u=t({},n.get(s),u)),n.set(s,u)})(n)}});unwrapExports(create);var create_1=create.createSubscription,omit=createCommonjsModule(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){return void 0===n&&(n={}),Object.keys(n).reduce(function(t,r){return r!==e&&(t[r]=n[r]),t},{})}});unwrapExports(omit);var unsubscribe=createCommonjsModule(function(e,n){Object.defineProperty(n,"__esModule",{value:!0});n.createUnsubscribe=function(e,n){return function(){handlers.onHandlers(function(e){return function(n,t){var r=n.get(t),o=omit.default(e,r);Object.keys(o).length?n.set(t,o):n.delete(t)}}(e))(n)}}});unwrapExports(unsubscribe);var unsubscribe_1=unsubscribe.createUnsubscribe,lib=createCommonjsModule(function(e,n){var t;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return{init:function(e){var n=e.validate,r=function(e){return function(n,r){Object.keys(e).forEach(function(o){e[o](n,t(),function(){return unsubscribe.createUnsubscribe(o,r)()})})}};return{onStoreCreated:function(e){t=e.getState},onModel:function(e){var t=Object.keys(e.reducers||{}).concat(Object.keys(e.effects||{}));Object.keys(e.subscriptions||{}).forEach(function(r){n([[!!r.match(/\/(.+)?\//),"Invalid subscription matcher ("+r+")"],["function"!=typeof e.subscriptions[r],"Subscription matcher in "+e.name+" ("+r+") must be a function"]]),create.createSubscription(e.name,r,e.subscriptions[r],t)})},middleware:function(){return function(e){return function(n){var t=n.type;if(subscriptions.subscriptions.has(t)){var o=subscriptions.subscriptions.get(t);r(o)(n,t)}else subscriptions.patternSubscriptions.forEach(function(e,o){if(t.match(RegExp(o))){var s=subscriptions.patternSubscriptions.get(o);r(s)(n,o)}});return e(n)}}}}}}}}),index=unwrapExports(lib);export default index;
//# sourceMappingURL=rematch-subscriptions.esm.js.map
