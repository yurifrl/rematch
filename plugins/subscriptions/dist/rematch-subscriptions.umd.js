!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.RematchSubscriptions={})}(this,function(e){"use strict";var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t){return e(t={exports:{}},t.exports),t.exports}var o=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptions=new Map,t.patternSubscriptions=new Map});n(o);var i=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=/^[A-Z0-9-_]+\/[A-Z0-9-_]+$/i,r=/^[A-Z0-9-_*]+\/[A-Z0-9-_*]+$/i,i=function(e,t){return!!e.match(t)};t.onHandlers=function(e){return function(t){if(i(t,n))e(o.subscriptions,t);else if(i(t,r)){var u="^"+t.replace("*",".*")+"$";e(o.patternSubscriptions,u)}else{if("^"!==t[0])throw Error("Invalid subscription matcher: "+t);e(o.patternSubscriptions,t)}}}});n(i);var u=r(function(e,n){var r=t&&t.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(n,"__esModule",{value:!0}),n.createSubscription=function(e,t,n,o){i.onHandlers(function(t,i){o.forEach(function(t){var n=RegExp(i);if((e+"/"+t).match(n))throw Error("Subscription ("+i+") cannot match action name ("+t+") in its own model.")});var u,c=((u={})[e]=n,u);t.has(i)&&(c=r({},t.get(i),c)),t.set(i,c)})(t)}});n(u);var c=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return void 0===t&&(t={}),Object.keys(t).reduce(function(n,r){return r!==e&&(n[r]=t[r]),n},{})}});n(c);var s=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.createUnsubscribe=function(e,t){return function(){i.onHandlers(function(e){return function(t,n){var r=t.get(n),o=c.default(e,r);Object.keys(o).length?t.set(n,o):t.delete(n)}}(e))(t)}}});n(s);var a=n(r(function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{init:function(e){var t=e.validate,r=function(e){return function(t,r){Object.keys(e).forEach(function(o){e[o](t,n(),function(){return s.createUnsubscribe(o,r)()})})}};return{onStoreCreated:function(e){n=e.getState},onModel:function(e){var n=Object.keys(e.reducers||{}).concat(Object.keys(e.effects||{}));Object.keys(e.subscriptions||{}).forEach(function(r){t([[!!r.match(/\/(.+)?\//),"Invalid subscription matcher ("+r+")"],["function"!=typeof e.subscriptions[r],"Subscription matcher in "+e.name+" ("+r+") must be a function"]]),u.createSubscription(e.name,r,e.subscriptions[r],n)})},middleware:function(){return function(e){return function(t){var n=t.type;if(o.subscriptions.has(n)){var i=o.subscriptions.get(n);r(i)(t,n)}else o.patternSubscriptions.forEach(function(e,i){if(n.match(RegExp(i))){var u=o.patternSubscriptions.get(i);r(u)(t,i)}});return e(t)}}}}}}}}));e.default=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=rematch-subscriptions.umd.js.map
